<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
		</style>
	</head>
	<body>
		<script src="https://threejs.org/build/three.js"></script>
		<script>
            import {ThreeMFLoader} from './jsm/loaders/3MFLoader.js';

            console.log('Its alive');
			const scene = new THREE.Scene();
			const camera = new THREE.PerspectiveCamera( 30, window.innerWidth / window.innerHeight, 0.1, 1000 );

			const renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );

			// const geometry = new THREE.BoxGeometry();
			// const material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
			// const cube = new THREE.Mesh( geometry, material );
			// scene.add( cube );

            const loader = new GLTFLoader();

            const manager = new THREE.LoadingManager();

            const loader = new ThreeMFLoader( manager );
            loader.load( './models/3mf/truck.3mf', function ( object ) {

                object.quaternion.setFromEuler( new THREE.Euler( - Math.PI / 2, 0, 0 ) ); 	// z-up conversion

                object.traverse( function ( child ) {

                    child.castShadow = true;

                } );

                scene.add( object );

            } );

            const geometry = new THREE.CylinderGeometry( 2, 2, 0.1, 3);
            const material = new THREE.MeshBasicMaterial( {color: 0x00ff00} );
            const cylinder = new THREE.Mesh( geometry, material );
            
            scene.add( cylinder );

            const pointLight = new THREE.PointLight( 0xffffff, 0.8 );
            camera.add( pointLight );
            
			camera.position.z = 10;
            // camera.position.set( 2, 2, 8 );
            cylinder.rotation.y += 90;
            
            // cylinder.rotation.y += ;

			const animate = function () {
				requestAnimationFrame( animate );

				// cylinder.rotation.x += 0.01;
				// cylinder.rotation.y -= 0.01;
				// cylinder.rotation.z -= 0.03;

				renderer.render( scene, camera );
			};

			animate();
		</script>
	</body>
</html>